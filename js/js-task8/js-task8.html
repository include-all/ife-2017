<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>js-task8</title>
	<style type="text/css">
		div{
			height: 68px;
			border:solid 1px black;
			padding: 5px;
 			background-color: white;
 			display: inline-block;
 			vertical-align: top;
		}
		div div{
			height: 56px;
		}
		div div div{
			height: 44px;
		}
		div div div div{
			height: 32px;
		}
		div div div div div{
			height: 20px;
		}
		#supper{
			width: 1350px;
		}
		#cook{
			width:515px;
		}
		#note{
			width:560px;
		}
		#fish{
			width:150px;
		}
	</style>
</head>
<body>
	<div id="supper">
		Super
		<div id="cook">
			Cook
			<div id="apple">
				Apple
				<div id="pear">
					Pear
				</div>
				<div id="pig">
					Pig
				</div>
				<div id="colo">
					Colo
				</div>
				<div id="soccer">
					Soccer
				</div>
			</div>
			<div id="phone">
				Phone
			</div>
			<div id="blank_1">
				<div id="book">
					Book
				</div>
				<div id="school">
					School
				</div>
			</div>
		</div>


		<div id="note">
			Note
			<div id="human">
				Human
				<div id="code">
					Code
				</div>
				<div id="opreate">
					Operate
				</div>
				<div id="man">
					Man
				</div>
			</div>
			<div id="program">
				Program
				<div id=bement>
					Bement
					<div id="cat">
						Cat
					</div>
				</div>
				<div id="glass">
					Glass
				</div>
			</div>
		</div>


		<div id="fish">
			Fish
		</div>
	</div>

	<button id="button">开始遍历</button><br>
	<input type="text" id="text">
	<button id="select">查询</button>

	<script type="text/javascript">
		var filter=function(node){
			return node.tagName.toLowerCase()=="div"?
					NodeFilter.FILTER_ACCEPT:
					NodeFilter.FILTER_SKIP;
		}
	 	var div=document.getElementById("supper");


	 	var button=document.getElementById("button");
	 	var time=null;
	 	button.onclick=function(){
	 		var iterator=document.createNodeIterator(div,NodeFilter.SHOW_ELEMENT,filter,false);
	 		var i=0;
	 		var node=iterator.nextNode();
	 		var nodeTemp=node;
	 		time=setInterval(function(){
	 			if(i!=0){
	 				nodeTemp.style.backgroundColor="white";
	 			}
	 			if(node==null){
	 				clearInterval(time);
	 				return;
	 			}
	 			node.style.backgroundColor="blue";
	 			nodeTemp=node;
	 			node=iterator.nextNode();
	 			i++;
	 		},500);
	    }


	    var btnSelect=document.getElementById("select");
	    btnSelect.onclick=function(){
	 		var iterator=document.createNodeIterator(div,NodeFilter.SHOW_ELEMENT,filter,false);
	 		var textSelect=document.getElementById("text").value;
	 	
	 		var i=0;
	 		var node=iterator.nextNode();
	 		var nodeTemp=node;
	 		time=setInterval(function(){
	 			if(i!=0){
	 				nodeTemp.style.backgroundColor="white";
	 			}

	 			if(node==null){
	 				clearInterval(time);
	 				return;
	 			}
	 			
	 			var text=node.innerText.split(/\s+/g);
	 			if(textSelect==text[0]){
	 				clearInterval(time);
	 			}

	 			node.style.backgroundColor="blue";
	 			nodeTemp=node;
	 			node=iterator.nextNode();
	 			i++;
	 		},500);
	    }

	</script>
</body>
</html>